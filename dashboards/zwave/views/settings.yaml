- type: vertical-stack
  cards:
    - type: markdown
      content: '## Z-Wave Operations'

    # TODO: Add a link to //config/ozw/network/1/dashboard
    # TODO: Show a list of dead/failed nodes (if possible)

    - type: entities
      title: Node Selection
      show_title: true
      entities:
        - entity: input_select.ozw_nodes
        - entity: input_number.ozw_node_id

    - type: button
      entity: automation.refresh_ozw_node_list
      name: Refresh Node List
      show_icon: false
      show_name: true
      tap_action:
        action: call-service
        service: automation.trigger
        service_data:
          entity_id: automation.refresh_ozw_node_list

    - type: horizontal-stack
      cards:
        - type: button
          entity: script.send_ozw_node_command
          name: Request Dynamic
          icon: mdi:progress-question
          tap_action:
            action: call-service
            service: script.turn_on
            service_data:
              entity_id: script.send_ozw_node_command
              variables:
                zw_command: requestnodedynamic

        - type: button
          entity: script.send_ozw_node_command
          name: Refresh Node Info
          icon: mdi:refresh
          tap_action:
            action: call-service
            service: script.turn_on
            service_data:
              entity_id: script.send_ozw_node_command
              variables:
                zw_command: refreshnodeinfo

        - type: button
          entity: script.send_ozw_node_command
          name: Send Node Info
          icon: mdi:send
          tap_action:
            action: call-service
            service: script.turn_on
            service_data:
              entity_id: script.send_ozw_node_command
              variables:
                zw_command: sendnodeinformation

    - type: horizontal-stack
      cards:
        - type: button
          entity: script.send_ozw_node_command
          name: Has Node Failed
          icon: mdi:help-network-outline
          tap_action:
            action: call-service
            service: script.turn_on
            service_data:
              entity_id: script.send_ozw_node_command
              variables:
                zw_command: hasnodefailed

        - type: button
          entity: script.send_ozw_node_command
          name: Remove Failed Node
          icon: mdi:delete
          tap_action:
            action: call-service
            service: script.turn_on
            service_data:
              entity_id: script.send_ozw_node_command
              variables:
                zw_command: removefailednode

- type: vertical-stack
  cards:
    - type: markdown
      content: '## Network Data'

    - type: glance
      entities:
        - entity: binary_sensor.ozw_network_ready
          name: Ready
        - entity: binary_sensor.ozw_dead_nodes
          name: Dead nodes

    - type: markdown
      content: |-
        ## Network Status
        ```
              Status: {{ state_attr('binary_sensor.ozw_network_ready', 'Status') }}
           Timestamp: {{ state_attr('binary_sensor.ozw_network_ready', 'TimeStamp') | timestamp_local }}
           OpenZWave: {{ state_attr('binary_sensor.ozw_network_ready', 'OpenZWave_Version') }}
        QT-OpenZWave: {{ state_attr('binary_sensor.ozw_network_ready', 'QTOpenZWave_Version') }}
           OZWDaemon: {{ state_attr('binary_sensor.ozw_network_ready', 'OZWDaemon_Version') }}
                  QT: {{ state_attr('binary_sensor.ozw_network_ready', 'QT_Version') }}
              HomeID: {{ state_attr('binary_sensor.ozw_network_ready', 'homeID') }}
        ```

    - type: markdown
      content: |-
        ## Last Notification
        ```
               Node: {{ state_attr('sensor.ozw_network_notification', 'Node') }}
          Timestamp: {{ state_attr('sensor.ozw_network_notification', 'TimeStamp') | timestamp_local}}
              Event: {{ state_attr('sensor.ozw_network_notification', 'Event') }}
        ```
