- type: entities
  title: Settings
  show_header_toggle: false
  entities:
    - input_boolean.force_guest_mode
    - input_boolean.automatic_night_theme
    - input_select.default_theme

- type: entities
  title: Notifications
  show_header_toggle: false
  entities:
    - entity: input_boolean.notify_individual_guest_arrivals
      name: Individual guest arrivals, or only first
    - entity: input_boolean.notify_car_problems
      name: Car problems
    - entity: input_boolean.notify_plant_problems
      name: Plant problems
    - entity: input_boolean.notify_power_outages
      name: Power outages

- type: custom:auto-entities
  card:
    type: entities
    title: Doors
    show_header_toggle: false
  sort:
    method: state
  filter:
    include:
      - group: group.all_doors
        options:
          <<: &aggregate_row_options
            type: custom:template-entity-row
            active: "{{ is_state('this.entity_id', 'on') }}"
            secondary: "{{ relative_time(states['this.entity_id'].last_changed) }} ago"
            state: >-
              {% set state = states['this.entity_id'] %}
              {% if state.state in ['on', 'off'] -%}
                _(component.binary_sensor.state.{{ state.attributes.device_class }}.{{ state.state }})
              {%- else -%}
                _(state.default.{{ state.state }})
              {%- endif %}
          name: "{{ states['this.entity_id'].name | replace(' door', '') }}"

- type: custom:auto-entities
  card:
    type: entities
    title: Windows
    show_header_toggle: false
  sort:
    method: state
  filter:
    include:
      - group: group.all_windows
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' window', '') }}"

- type: custom:auto-entities
  card:
    type: entities
    title: Leaks
    show_header_toggle: false
  sort:
    method: state
  filter:
    include:
      - group: group.all_leaks
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' leak', '') }}"

- type: custom:auto-entities
  card:
    type: entities
    title: Motion
    show_header_toggle: false
  sort:
    method: state
  filter:
    include:
      - group: group.all_motions
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' motion', '') }}"

- type: entities
  title: Batteries
  show_header_toggle: false
  style: |
    :host {
      --paper-item-icon-active-color: var(--error-color)
    }
  entities:
    - entity: binary_sensor.all_batteries
      name: Status

    - type: custom:auto-entities
      card:
        type: custom:fold-entity-row
        head:
          type: section
          label: Details
      sort:
        method: state
        numeric: true
      options:
      filter:
        include:
          - group: group.all_batteries
            options:
              type: custom:template-entity-row
              name: >-
                {{ states['this.entity_id'].name | replace("'s battery", '') | replace(' battery', '') }}
              state: >-
                {% set state = states['this.entity_id'] %}
                {% if state.state | int != 0 -%}
                  {{ state.state_with_unit }}
                {%- else -%}
                  _(state.default.{{ state.state }})
                {%- endif %}
              secondary: "{{ states['this.entity_id'].attributes.battery_type }}"
              active: "{{ 'this.entity_id' in states['sensor.low_batteries'].state }}"
