- type: entities
  title: Settings
  show_header_toggle: false
  entities:
    - input_boolean.power_outage_manage_devices

- type: entities
  title: Notifications
  show_header_toggle: false
  entities:
    - entity: input_boolean.notify_household_changes
      name: Household changes
    - entity: input_boolean.notify_server_outages
      name: Server outages
    - entity: input_boolean.notify_minecraft_status
      name: Minecraft status
    - entity: input_boolean.notify_minecraft_player_changes
      name: Minecraft player changes

- type: entities
  show_header_toggle: false
  title: UPS
  entities:
    - entity: sensor.ups_status
      name: Status
    - entity: sensor.ups_load
      name: Load
    - entity: sensor.ups_battery
      name: Battery
    - entity: sensor.ups_input_voltage
      name: Input voltage
    - entity: sensor.ups_time_left
      name: Time left
    - entity: sensor.ups_time_on_battery
      name: Time on battery

- type: entities
  title: Home Assistant
  show_header_toggle: false
  entities:
    - sensor.connected_clients
    - entity: sensor.hacs
      name: HACS
    - sensor.current_home_assistant_version
    - sensor.latest_home_assistant_version

- type: entities
  title: Minecraft
  show_header_toggle: false
  entities:
    - entity: binary_sensor.minecraft_server_status
      name: Status
      state_color: true
    - entity: sensor.minecraft_server_version
      name: Version
    - entity: sensor.minecraft_latest_version
      name: Latest version
    - type: custom:template-entity-row
      entity: sensor.minecraft_server_players_online
      name: Players
      secondary: >-
        {% for player in states['sensor.minecraft_server_players_online'].attributes['players_list'] | default([]) -%}
        {{ player }}{{ ', ' if not loop.last and loop.revindex != 2 }}{{ ' and ' if loop.revindex == 2 }}
        {%- endfor %}
    - entity: sensor.minecraft_server_latency_time
      name: Latency

- type: entities
  title: Automate
  show_header_toggle: false
  entities:
    - sensor.processor_use
    - sensor.processor_temperature
    - sensor.memory_use_percent

- !template
  file: ../cards/server.yaml.j2
  variables:
    name: Media
    key: media

- !template
  file: ../cards/server.yaml.j2
  variables:
    name: Relay South
    key: relay_south

- !template
  file: ../cards/server.yaml.j2
  variables:
    name: Relay North
    key: relay_north

- type: entities
  title: Z-Wave
  show_header_toggle: false
  entities:
    - entity: zwave.usb_controller

    - type: custom:auto-entities
      show_empty: false
      sort:
        method: name
      filter:
        include: &zwave_failed_filters
          - domain: zwave
            attributes:
              is_failed: true
      card:
        type: custom:fold-entity-row
        head:
          type: section
          label: Failed
        open: true

    - type: custom:auto-entities
      sort:
        method: name
      filter:
        include:
          - domain: zwave
            attributes: &zwave_battery_filter
              battery_level: ">= 0"
        exclude: *zwave_failed_filters
      card:
        type: custom:fold-entity-row
        head:
          type: section
          label: Battery powered
    - type: custom:auto-entities
      sort:
        method: name
      filter:
        include:
          - domain: zwave
            not:
              attributes: *zwave_battery_filter
        exclude: *zwave_failed_filters
      card:
        type: custom:fold-entity-row
        head:
          type: section
          label: Hard-wired
