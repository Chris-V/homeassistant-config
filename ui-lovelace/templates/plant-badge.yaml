variables:
  sensor_type:
  sensor_entity:
  problems_entity:

custom_fields:
  badge:
    card:
      type: custom:hui-state-badge-element
      entity: "[[[ return variables.sensor_entity ]]]"
      title:

styles:
  grid:
    - position: relative
    - grid-template-areas: '"l" "badge"'
    - grid-template-columns: min-content
    - grid-template-rows: 0 min-content
  card:
    - background-color: transparent
    - box-shadow: none
    - overflow: visible
  custom_fields:
    badge:
      - overflow: visible
      - --label-badge-red: |
          [[[
            return states[variables.problems_entity].state.indexOf(variables.sensor_type) === -1
              ? "#363941"
              : "var(--google-red-500)"
          ]]]

tap_action:
  action: more-info
  entity: "[[[ return variables.sensor_entity ]]]"
