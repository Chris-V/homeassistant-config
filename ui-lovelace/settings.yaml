- type: entities
  title: Settings
  show_header_toggle: false
  entities:
    - input_boolean.guest_mode
    - input_boolean.automatic_night_theme
    - input_select.default_theme

- type: entities
  title: Notifications
  show_header_toggle: false
  entities:
    - entity: automation.notify_plant_problems
      name: Plant problems
    - entity: input_boolean.notify_power_outages
      name: Power outages

- type: custom:auto-entities
  sort:
    method: last_changed
  filter:
    include:
      - group: group.all_doors
        options:
          <<: &aggregate_row_options
            type: custom:template-entity-row
            active: "{{ is_state('this.entity_id', 'on') }}"
            secondary: "{{ relative_time(states['this.entity_id'].last_changed) }} ago"
          name: "{{ states['this.entity_id'].name | replace(' door', '') }}"
          state: "_(state.binary_sensor.door.{{ states('this.entity_id') }})"
  card:
    type: entities
    title: Doors
    show_header_toggle: false

- type: custom:auto-entities
  sort:
    method: last_changed
  filter:
    include:
      - group: group.all_windows
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' window', '') }}"
          state: "_(state.binary_sensor.window.{{ states('this.entity_id') }})"
  card:
    type: entities
    title: Windows
    show_header_toggle: false

- type: custom:auto-entities
  sort:
    method: last_changed
  filter:
    include:
      - group: group.all_leaks
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' leak', '') }}"
          state: "_(state.binary_sensor.moisture.{{ states('this.entity_id') }})"
  card:
    type: entities
    title: Leaks
    show_header_toggle: false

- type: custom:auto-entities
  sort:
    method: last_changed
  filter:
    include:
      - group: group.all_motions
        options:
          <<: *aggregate_row_options
          name: "{{ states['this.entity_id'].name | replace(' motion', '') }}"
          state: "_(state.binary_sensor.motion.{{ states('this.entity_id') }})"
  card:
    type: entities
    title: Motion
    show_header_toggle: false

- type: entities
  title: Batteries
  show_header_toggle: false
  entities:
    - entity: sensor.all_batteries
      name: Lowest
      secondary_info: last-changed

    - type: custom:auto-entities
      sort:
        method: state
        numeric: true
      options:
      filter:
        include:
          - group: group.all_batteries
            options:
              type: custom:template-entity-row
              state: "{{ states['this.entity_id'].state_with_unit }}"
              secondary: "{{ relative_time(states['this.entity_id'].last_changed) }} ago"
              name: >-
                {{ states['this.entity_id'].name | replace("'s battery", '') | replace(' battery', '') }}
      card:
        type: custom:fold-entity-row
        head:
          type: section
          label: Details
