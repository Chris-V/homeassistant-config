type: picture-elements
image: /local/frontend/slinky_card.jpg
style: |
  .element[class~=element] {
    position: relative;
    transform: none;
  }
  ::-webkit-scrollbar {
    width: 3px;
    height: 3px;
  }
  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.45);
  }
  ::-webkit-scrollbar-thumb {
    background: rgba(0, 139, 239, 0.45);
  }
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 139, 239, 1);
  }
elements:
  - type: custom:group-element
    visible: true
    no_toggle_hide: true
    elements_pos:
      position: absolute
      top: 0
      right: 0
      left: 0
      bottom: 0
      display: flex
      flex-direction: column
      "--secondary-text-color": "#DADADB"
      "--primary-text-color": "#DADADB"
      "--paper-item-icon-color": "#DADADB"
      "--iron-icon-width": 40px
      "--iron-icon-height": 40px
      "--ha-card-background": rgba(0, 0, 0, 0)
      "--ha-card-box-shadow": none
    elements:
      - type: custom:group-element # Content
        visible: true
        no_toggle_hide: true
        elements_pos:
          order: 1
          flex-grow: 1
          flex-shrink: 1
          display: flex
          overflow: auto hidden
          scroll-behavior: smooth
          scroll-snap-type: x mandatory
          "-webkit-overflow-scrolling": touch
          "--iron-icon-width": 24px
          "--iron-icon-height": 24px
        elements:
          - type: conditional # Problem indicator
            conditions:
              - entity: binary_sensor.slinky_requires_attention
                state: "on"
            elements:
              - type: icon
                icon: mdi:alert-circle
                title: Problems
                entity: binary_sensor.slinky_requires_attention
                tap_action:
                  action: more-info
                style:
                  position: absolute
                  right: 1em
                  top: 1.25em
                  z-index: 1
                  color: var(--google-red-500)
                  filter: drop-shadow(black 0 0 1px)

          - type: custom:gap-card # Initial
            height: 0
            style: &content_slide_style
              display: block
              width: 100%
              height: 100%
              flex-shrink: 0
              scroll-snap-align: start

          - type: custom:hui-vertical-stack-card # All switches
            style:
              <<: *content_slide_style
              background-color: rgba(0, 0, 0, 0.75)
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    template: terra_detailed_switch
                    name: Scheduling
                    entity: input_boolean.slinky_scheduled_lights
                    aspect_ratio: 1.7/1
                    show_label: false
                    hold_action:
                      action: more-info
                      entity: input_boolean.slinky_scheduled_lights
                    lock:
                      enabled: true
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_power_strip
                    entity: switch.slinky_power_strip
                    name: Master
                    aspect_ratio: 1.7/1
                    lock:
                      enabled: true
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_outlet_5
                    entity: switch.slinky_outlet_5
                    name: Controller
                    aspect_ratio: 1.7/1
                    lock:
                      enabled: true
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_uv_light
                    entity: switch.slinky_uv_light
                    name: UV light
                    aspect_ratio: 1.2/1
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_heater
                    entity: switch.slinky_heater
                    name: Heater
                    aspect_ratio: 1.2/1
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_heat_bulb
                    entity: switch.slinky_heat_bulb
                    name: Heat bulb
                    aspect_ratio: 1.2/1
                  - type: custom:button-card
                    template: terra_detailed_switch
                    variables:
                      prefix: slinky_outlet_4
                    entity: switch.slinky_outlet_4
                    name: Outlet 4
                    aspect_ratio: 1.2/1

      - type: custom:group-element # Footer
        visible: true
        no_toggle_hide: true
        elements_pos:
          overflow: hidden
          display: flex
          order: 2
          flex-grow: 0
          flex-shrink: 0
          align-items: center
          padding: 0 5px
          background-color: rgba(0, 0, 0, 0.45)
          color: "#D3D3D3"
        elements:
          - type: custom:button-card # UV light
            template: terra_footer_switch
            name: UV Light
            entity: switch.slinky_uv_light
            variables:
              power_entity: sensor.slinky_uv_light_power
              problems_entity: binary_sensor.slinky_requires_attention
              problems_attribute: uv_light
            style: &state_icon_style
              margin-right: 15px
          - type: custom:button-card # Heater
            template: terra_footer_switch
            name: Heater
            entity: switch.slinky_heater
            variables:
              power_entity: sensor.slinky_heater_power
              problems_entity: binary_sensor.slinky_requires_attention
              problems_attribute: heater
            style: *state_icon_style
          - type: custom:button-card # Heat bulb
            template: terra_footer_switch
            name: Heat bulb
            entity: switch.slinky_heat_bulb
            variables:
              power_entity: sensor.slinky_heat_bulb_power
              problems_entity: binary_sensor.slinky_requires_attention
              problems_attribute: heat_bulb
            style:
              margin-right: auto

          - type: custom:group-element # Temperature
            visible: true
            no_toggle_hide: true
            elements_pos: &sensor_group_style
              margin-left: 20px
              display: flex
              flex-direction: column
              align-items: center
              justify-content: flex-end
            elements:
              - type: state-icon
                entity: sensor.slinky_temperature
                title: Temperature
                tap_action:
                  action: more-info
                style: &sensor_icon_style
                  transform: scale(0.6)
              - type: state-label
                entity: sensor.slinky_temperature
                title: Temperature
                tap_action:
                  action: more-info
                style: &sensor_label_style
                  margin: -8px

          - type: custom:group-element # Basking temperature
            visible: true
            no_toggle_hide: true
            elements_pos: *sensor_group_style
            elements:
              - type: state-icon
                entity: sensor.slinky_basking_temperature
                title: Basking temperature
                icon: mdi:spotlight-beam
                tap_action:
                  action: more-info
                style: *sensor_icon_style
              - type: state-label
                entity: sensor.slinky_basking_temperature
                title: Basking temperature
                tap_action:
                  action: more-info
                style: *sensor_label_style

          - type: custom:group-element # Humidity
            visible: true
            no_toggle_hide: true
            elements_pos: *sensor_group_style
            elements:
              - type: state-icon
                entity: sensor.slinky_humidity
                title: Humidity
                tap_action:
                  action: more-info
                style: *sensor_icon_style
              - type: state-label
                entity: sensor.slinky_humidity
                title: Humidity
                tap_action:
                  action: more-info
                style: *sensor_label_style
